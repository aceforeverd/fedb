
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>WINDOW Clause &#8212; OpenMLDB  documentation</title>
    
  <!-- Loaded before other Sphinx assets -->
  <link href="../../../_static/styles/theme.css?digest=1999514e3f237ded88cf" rel="stylesheet">
<link href="../../../_static/styles/pydata-sphinx-theme.css?digest=1999514e3f237ded88cf" rel="stylesheet">

    
  <link rel="stylesheet"
    href="../../../_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../../../_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../../../_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    <link rel="stylesheet" type="text/css" href="../../../_static/pygments.css" />
    <link rel="stylesheet" href="../../../_static/styles/sphinx-book-theme.css?digest=5115cc725059bd94278eecd172e13a965bf8f5a9" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/copybutton.css" />
    
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../../../_static/scripts/pydata-sphinx-theme.js?digest=1999514e3f237ded88cf">

    <script data-url_root="../../../" id="documentation_options" src="../../../_static/documentation_options.js"></script>
    <script src="../../../_static/jquery.js"></script>
    <script src="../../../_static/underscore.js"></script>
    <script src="../../../_static/doctools.js"></script>
    <script src="../../../_static/clipboard.min.js"></script>
    <script src="../../../_static/copybutton.js"></script>
    <script src="../../../_static/scripts/sphinx-book-theme.js?digest=9c920249402e914e316237a7dbc6769907cce411"></script>
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
    <link rel="next" title="Limit Clause" href="LIMIT_CLAUSE.html" />
    <link rel="prev" title="Having Clause" href="HAVING_CLAUSE.html" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="None">
    

    <!-- Google Analytics -->
    
  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="60">
<!-- Checkboxes to toggle the left sidebar -->
<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation" aria-label="Toggle navigation sidebar">
<label class="overlay overlay-navbar" for="__navigation">
    <div class="visually-hidden">Toggle navigation sidebar</div>
</label>
<!-- Checkboxes to toggle the in-page toc -->
<input type="checkbox" class="sidebar-toggle" name="__page-toc" id="__page-toc" aria-label="Toggle in-page Table of Contents">
<label class="overlay overlay-pagetoc" for="__page-toc">
    <div class="visually-hidden">Toggle in-page Table of Contents</div>
</label>
<!-- Headers at the top -->
<div class="announcement header-item noprint"></div>
<div class="header header-item noprint"></div>

    
    <div class="container-fluid" id="banner"></div>

    

    <div class="container-xl">
      <div class="row">
          
<!-- Sidebar -->
<div class="bd-sidebar noprint" id="site-navigation">
    <div class="bd-sidebar__content">
        <div class="bd-sidebar__top"><div class="navbar-brand-box">
    <a class="navbar-brand text-wrap" href="../../../index.html">
      
        <!-- `logo` is deprecated in Sphinx 4.0, so remove this when we stop supporting 3 -->
        
      
      
      <img src="../../../_static/openmldb_logo.png" class="logo" alt="logo">
      
      
    </a>
</div><form class="bd-search d-flex align-items-center" action="../../../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search the docs ..." aria-label="Search the docs ..." autocomplete="off" >
</form><nav class="bd-links" id="bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item active">
        <ul class="current nav bd-sidenav">
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../../../about/index.html">
   About
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" type="checkbox"/>
  <label for="toctree-checkbox-1">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../../../about/intro.html">
     Introduction
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../../about/milestones.html">
     Milestones
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../../about/release_notes.html">
     Release Notes
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../../../quickstart/index.html">
   Quickstart
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" type="checkbox"/>
  <label for="toctree-checkbox-2">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../../../quickstart/openmldb_quickstart.html">
     OpenMLDB Quickstart
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../../quickstart/java_sdk.html">
     Java SDK Quickstart
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../../quickstart/python_sdk.html">
     Python SDK Quickstart
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../../quickstart/rest_api.html">
     REST APIs
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../../../tutorial/index.html">
   Tutorials
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" type="checkbox"/>
  <label for="toctree-checkbox-3">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../../../tutorial/standalone_vs_cluster.html">
     Cluster vs. Standalone Versions
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../../tutorial/modes.html">
     The Workflow of Cluster Version and Execution Mode
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../../tutorial/tutorial_sql_1.html">
     SQL for Feature Extraction (Part 1)
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../../tutorial/tutorial_sql_2.html">
     SQL for Feature Extraction (Part 2)
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../../tutorial/data_import.html">
     Data Import
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../../tutorial/openmldbspark_distribution.html">
     OpenMLDB Spark Distribution
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../../../use_case/index.html">
   Use Cases
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-4" name="toctree-checkbox-4" type="checkbox"/>
  <label for="toctree-checkbox-4">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../../../use_case/lightgbm_demo.html">
     OpenMLDB + LightGBM: Taxi Trip Duration Prediction
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../../use_case/pulsar_connector_demo.html">
     Importing Real-Time Data Streams from Pulsar
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../../use_case/kafka_connector_demo.html">
     Importing Real-Time Data Streams from Kafka
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../../use_case/dolphinscheduler_task_demo.html">
     Building End-to-End MLOps Workflows (OpenMLDB + DolphinScheduler)
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../../use_case/JD_recommendation_en.html">
     OpenMLDB + OneFlow: Prediction of Purchase Intention for High Potential Customers
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../../../deploy/index.html">
   Deployment
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-5" name="toctree-checkbox-5" type="checkbox"/>
  <label for="toctree-checkbox-5">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../../../deploy/compile.html">
     Build
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../../deploy/install_deploy.html">
     Install and Deploy
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../../deploy/conf.html">
     Configuration File
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../../../maintain/index.html">
   Maintenance
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-6" name="toctree-checkbox-6" type="checkbox"/>
  <label for="toctree-checkbox-6">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../../../maintain/upgrade.html">
     Upgrade
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../../maintain/backup.html">
     Backup and Restore
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../../maintain/monitoring.html">
     Monitoring
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../../maintain/cli.html">
     Operations in CLI
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../../maintain/faq.html">
     Operation and Maintenance FAQ
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../../maintain/scale.html">
     Scale-Out and Scale-In
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../../maintain/diagnose.html">
     Diagnostic Tool
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../../../developer/index.html">
   Developers
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-7" name="toctree-checkbox-7" type="checkbox"/>
  <label for="toctree-checkbox-7">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../../../developer/built_in_function_develop_guide.html">
     Built-In Function Development
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 current active has-children">
  <a class="reference internal" href="../../index.html">
   References
  </a>
  <input checked="" class="toctree-checkbox" id="toctree-checkbox-8" name="toctree-checkbox-8" type="checkbox"/>
  <label for="toctree-checkbox-8">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul class="current">
   <li class="toctree-l2 has-children">
    <a class="reference internal" href="../../arch/index.html">
     Architecture
    </a>
    <input class="toctree-checkbox" id="toctree-checkbox-9" name="toctree-checkbox-9" type="checkbox"/>
    <label for="toctree-checkbox-9">
     <i class="fas fa-chevron-down">
     </i>
    </label>
    <ul>
     <li class="toctree-l3">
      <a class="reference internal" href="../../arch/online_arch.html">
       Online Module Architecture
      </a>
     </li>
    </ul>
   </li>
   <li class="toctree-l2 current active has-children">
    <a class="reference internal" href="../index.html">
     SQL
    </a>
    <input checked="" class="toctree-checkbox" id="toctree-checkbox-10" name="toctree-checkbox-10" type="checkbox"/>
    <label for="toctree-checkbox-10">
     <i class="fas fa-chevron-down">
     </i>
    </label>
    <ul class="current">
     <li class="toctree-l3 has-children">
      <a class="reference internal" href="../language_structure/index.html">
       Language Structure
      </a>
      <input class="toctree-checkbox" id="toctree-checkbox-11" name="toctree-checkbox-11" type="checkbox"/>
      <label for="toctree-checkbox-11">
       <i class="fas fa-chevron-down">
       </i>
      </label>
      <ul>
       <li class="toctree-l4">
        <a class="reference internal" href="../language_structure/keywords.html">
         Keywords
        </a>
       </li>
       <li class="toctree-l4">
        <a class="reference internal" href="../language_structure/object_names_identifiers.html">
         SQL Object Name
        </a>
       </li>
       <li class="toctree-l4">
        <a class="reference internal" href="../language_structure/literals_value.html">
         Literal Value
        </a>
       </li>
       <li class="toctree-l4">
        <a class="reference internal" href="../language_structure/case_sensitive.html">
         Case Sensitive
        </a>
       </li>
       <li class="toctree-l4">
        <a class="reference internal" href="../language_structure/comment.html">
         Notes
        </a>
       </li>
      </ul>
     </li>
     <li class="toctree-l3 has-children">
      <a class="reference internal" href="../data_types/index.html">
       Data Type
      </a>
      <input class="toctree-checkbox" id="toctree-checkbox-12" name="toctree-checkbox-12" type="checkbox"/>
      <label for="toctree-checkbox-12">
       <i class="fas fa-chevron-down">
       </i>
      </label>
      <ul>
       <li class="toctree-l4">
        <a class="reference internal" href="../data_types/numeric_types.html">
         Numeric Type
        </a>
       </li>
       <li class="toctree-l4">
        <a class="reference internal" href="../data_types/string_types.html">
         String Type
        </a>
       </li>
       <li class="toctree-l4">
        <a class="reference internal" href="../data_types/date_and_time_types.html">
         Date and Time Type
        </a>
       </li>
      </ul>
     </li>
     <li class="toctree-l3 has-children">
      <a class="reference internal" href="../functions_and_operators/index.html">
       Expressions, Functions, and Operations
      </a>
      <input class="toctree-checkbox" id="toctree-checkbox-13" name="toctree-checkbox-13" type="checkbox"/>
      <label for="toctree-checkbox-13">
       <i class="fas fa-chevron-down">
       </i>
      </label>
      <ul>
       <li class="toctree-l4">
        <a class="reference internal" href="../functions_and_operators/operators.html">
         Operator
        </a>
       </li>
       <li class="toctree-l4">
        <a class="reference internal" href="../functions_and_operators/Files/udfs_8h.html">
         Built-in Functions
        </a>
       </li>
      </ul>
     </li>
     <li class="toctree-l3 current active has-children">
      <a class="reference internal" href="index.html">
       Data Query Statement （DQL）
      </a>
      <input checked="" class="toctree-checkbox" id="toctree-checkbox-14" name="toctree-checkbox-14" type="checkbox"/>
      <label for="toctree-checkbox-14">
       <i class="fas fa-chevron-down">
       </i>
      </label>
      <ul class="current">
       <li class="toctree-l4">
        <a class="reference internal" href="SELECT_STATEMENT.html">
         SELECT Overview
        </a>
       </li>
       <li class="toctree-l4">
        <a class="reference internal" href="JOIN_CLAUSE.html">
         JOIN Clause
        </a>
       </li>
       <li class="toctree-l4">
        <a class="reference internal" href="WHERE_CLAUSE.html">
         WHERE Clause
        </a>
       </li>
       <li class="toctree-l4">
        <a class="reference internal" href="GROUP_BY_CLAUSE.html">
         GROUP BY Clause
        </a>
       </li>
       <li class="toctree-l4">
        <a class="reference internal" href="HAVING_CLAUSE.html">
         Having Clause
        </a>
       </li>
       <li class="toctree-l4 current active">
        <a class="current reference internal" href="#">
         WINDOW Clause
        </a>
       </li>
       <li class="toctree-l4">
        <a class="reference internal" href="LIMIT_CLAUSE.html">
         Limit Clause
        </a>
       </li>
       <li class="toctree-l4">
        <a class="reference internal" href="NO_TABLE_SELECT_CLAUSE.html">
         No-table SELECT
        </a>
       </li>
       <li class="toctree-l4">
        <a class="reference internal" href="SELECT_INTO_STATEMENT.html">
         SELECT INTO
        </a>
       </li>
      </ul>
     </li>
     <li class="toctree-l3 has-children">
      <a class="reference internal" href="../dml/index.html">
       Data Manipulation Statement（DML）
      </a>
      <input class="toctree-checkbox" id="toctree-checkbox-15" name="toctree-checkbox-15" type="checkbox"/>
      <label for="toctree-checkbox-15">
       <i class="fas fa-chevron-down">
       </i>
      </label>
      <ul>
       <li class="toctree-l4">
        <a class="reference internal" href="../dml/INSERT_STATEMENT.html">
         INSERT
        </a>
       </li>
       <li class="toctree-l4">
        <a class="reference internal" href="../dml/LOAD_DATA_STATEMENT.html">
         LOAD DATA INFILE
        </a>
       </li>
       <li class="toctree-l4">
        <a class="reference internal" href="../dml/DELETE_STATEMENT.html">
         DELETE
        </a>
       </li>
      </ul>
     </li>
     <li class="toctree-l3 has-children">
      <a class="reference internal" href="../ddl/index.html">
       Data Definition Statement (DDL)
      </a>
      <input class="toctree-checkbox" id="toctree-checkbox-16" name="toctree-checkbox-16" type="checkbox"/>
      <label for="toctree-checkbox-16">
       <i class="fas fa-chevron-down">
       </i>
      </label>
      <ul>
       <li class="toctree-l4">
        <a class="reference internal" href="../ddl/CREATE_DATABASE_STATEMENT.html">
         CREATE DATABASE
        </a>
       </li>
       <li class="toctree-l4">
        <a class="reference internal" href="../ddl/SHOW_DATABASES_STATEMENT.html">
         SHOW DATABASES
        </a>
       </li>
       <li class="toctree-l4">
        <a class="reference internal" href="../ddl/USE_DATABASE_STATEMENT.html">
         USE DATABASE
        </a>
       </li>
       <li class="toctree-l4">
        <a class="reference internal" href="../ddl/DROP_DATABASE_STATEMENT.html">
         DROP DATABASE
        </a>
       </li>
       <li class="toctree-l4">
        <a class="reference internal" href="../ddl/DESC_STATEMENT.html">
         DESC
        </a>
       </li>
       <li class="toctree-l4">
        <a class="reference internal" href="../ddl/CREATE_TABLE_STATEMENT.html">
         CREATE TABLE
        </a>
       </li>
       <li class="toctree-l4">
        <a class="reference internal" href="../ddl/DROP_TABLE_STATEMENT.html">
         DROP TABLE
        </a>
       </li>
       <li class="toctree-l4">
        <a class="reference internal" href="../ddl/SHOW_TABLES_STATEMENT.html">
         SHOW TABLES
        </a>
       </li>
       <li class="toctree-l4">
        <a class="reference internal" href="../ddl/SHOW_VARIABLES_STATEMENT.html">
         SHOW VARIABLES
        </a>
       </li>
       <li class="toctree-l4">
        <a class="reference internal" href="../ddl/SET_STATEMENT.html">
         SET STATEMENT
        </a>
       </li>
       <li class="toctree-l4">
        <a class="reference internal" href="../ddl/CREATE_INDEX_STATEMENT.html">
         CREATE INDEX
        </a>
       </li>
       <li class="toctree-l4">
        <a class="reference internal" href="../ddl/DROP_INDEX_STATEMENT.html">
         DROP INDEX
        </a>
       </li>
      </ul>
     </li>
     <li class="toctree-l3 has-children">
      <a class="reference internal" href="../deployment_manage/index.html">
       DEPLOYMENT Management
      </a>
      <input class="toctree-checkbox" id="toctree-checkbox-17" name="toctree-checkbox-17" type="checkbox"/>
      <label for="toctree-checkbox-17">
       <i class="fas fa-chevron-down">
       </i>
      </label>
      <ul>
       <li class="toctree-l4">
        <a class="reference internal" href="../deployment_manage/DEPLOY_STATEMENT.html">
         DEPLOY
        </a>
       </li>
       <li class="toctree-l4">
        <a class="reference internal" href="../deployment_manage/DROP_DEPLOYMENT_STATEMENT.html">
         Delete DEPLOYMENT
        </a>
       </li>
       <li class="toctree-l4">
        <a class="reference internal" href="../deployment_manage/SHOW_DEPLOYMENTS.html">
         View DEPLOYMENTS List
        </a>
       </li>
       <li class="toctree-l4">
        <a class="reference internal" href="../deployment_manage/SHOW_DEPLOYMENT.html">
         View DEPLOYMENT Details
        </a>
       </li>
       <li class="toctree-l4">
        <a class="reference internal" href="../deployment_manage/ONLINE_SERVING_REQUIREMENTS.html">
         SQL On-Line Specifications and Requirements
        </a>
       </li>
      </ul>
     </li>
     <li class="toctree-l3 has-children">
      <a class="reference internal" href="../task_manage/index.html">
       Task Management
      </a>
      <input class="toctree-checkbox" id="toctree-checkbox-18" name="toctree-checkbox-18" type="checkbox"/>
      <label for="toctree-checkbox-18">
       <i class="fas fa-chevron-down">
       </i>
      </label>
      <ul>
       <li class="toctree-l4">
        <a class="reference internal" href="../task_manage/SHOW_JOBS.html">
         SHOW JOBS
        </a>
       </li>
       <li class="toctree-l4">
        <a class="reference internal" href="../task_manage/SHOW_JOB.html">
         SHOW JOB
        </a>
       </li>
       <li class="toctree-l4">
        <a class="reference internal" href="../task_manage/STOP_JOB.html">
         STOP JOB
        </a>
       </li>
       <li class="toctree-l4">
        <a class="reference internal" href="../task_manage/SUBMIT_JOB.html">
         SUBMIT JOB
        </a>
       </li>
      </ul>
     </li>
    </ul>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../ip_tips.html">
     IP Configuration
    </a>
   </li>
   <li class="toctree-l2 has-children">
    <a class="reference internal" href="../../client_config/index.html">
     Client Configuration
    </a>
    <input class="toctree-checkbox" id="toctree-checkbox-19" name="toctree-checkbox-19" type="checkbox"/>
    <label for="toctree-checkbox-19">
     <i class="fas fa-chevron-down">
     </i>
    </label>
    <ul>
     <li class="toctree-l3">
      <a class="reference internal" href="../../client_config/client_spark_config.html">
       Spark Client Configuration
      </a>
     </li>
    </ul>
   </li>
  </ul>
 </li>
</ul>

    </div>
</nav>
</br>
Current Version: main</br>
Versions：
<ul>
  <li><a href="WINDOW_CLAUSE.html">main</a></li>
  <li><a href="../../../../v0.5/index.html">v0.5</a></li>
  <li><a href="../../../../v0.4/index.html">v0.4</a></li>
  <li><a href="../../../../v0.6/index.html">v0.6</a></li>
</ul>
</br>
</div>
        <div class="bd-sidebar__bottom">
             <!-- To handle the deprecated key -->
            
            <div class="navbar_extra_footer">
            Theme by the <a href="https://ebp.jupyterbook.org">Executable Book Project</a>
            </div>
            
        </div>
    </div>
    <div id="rtd-footer-container"></div>
</div>


          


          
<!-- A tiny helper pixel to detect if we've scrolled -->
<div class="sbt-scroll-pixel-helper"></div>
<!-- Main content -->
<div class="col py-0 content-container">
    
    <div class="header-article row sticky-top noprint">
        



<div class="col py-1 d-flex header-article-main">
    <div class="header-article__left">
        
        <label for="__navigation"
  class="headerbtn"
  data-toggle="tooltip"
data-placement="right"
title="Toggle navigation"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-bars"></i>
  </span>

</label>

        
    </div>
    <div class="header-article__right">
<button onclick="toggleFullScreen()"
  class="headerbtn"
  data-toggle="tooltip"
data-placement="bottom"
title="Fullscreen mode"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>

<div class="menu-dropdown menu-dropdown-download-buttons">
  <button class="headerbtn menu-dropdown__trigger"
      aria-label="Download this page">
      <i class="fas fa-download"></i>
  </button>
  <div class="menu-dropdown__content">
    <ul>
      <li>
        <a href="../../../_sources/reference/sql/dql/WINDOW_CLAUSE.md.txt"
   class="headerbtn"
   data-toggle="tooltip"
data-placement="left"
title="Download source file"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="headerbtn__text-container">.md</span>
</a>

      </li>
      
      <li>
        
<button onclick="printPdf(this)"
  class="headerbtn"
  data-toggle="tooltip"
data-placement="left"
title="Print to PDF"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="headerbtn__text-container">.pdf</span>
</button>

      </li>
      
    </ul>
  </div>
</div>
<label for="__page-toc"
  class="headerbtn headerbtn-page-toc"
  
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-list"></i>
  </span>

</label>

    </div>
</div>

<!-- Table of contents -->
<div class="col-md-3 bd-toc show noprint">
    <div class="tocsection onthispage pt-5 pb-3">
        <i class="fas fa-list"></i> Contents
    </div>
    <nav id="bd-toc-nav" aria-label="Page">
        <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#syntax">
   Syntax
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#sql-statement-template">
   SQL Statement Template
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#description">
   Description
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#basic-window-spec-syntax-elements">
   Basic WINDOW SPEC Syntax Elements
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#window-partition-clause-and-window-orderby-clause">
     Window Partition Clause And Window OrderBy Clause
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#window-frame-units">
     Window Frame Units
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#window-frame-extent">
     Window Frame Extent
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#example">
       Example
      </a>
     </li>
    </ul>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#windowspec-elements-specifically-designed-by-openmldb">
   WindowSpec Elements Specifically Designed by OpenMLDB
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#window-union">
     1. WINDOW … UNION
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#id1">
       Example
      </a>
     </li>
    </ul>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#window-with-exclude-current-time">
     2. Window with EXCLUDE CURRENT_TIME
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#id2">
       Example
      </a>
     </li>
    </ul>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#window-with-exclude-current-row">
     3. Window with EXCLUDE CURRENT_ROW
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#id3">
       Example
      </a>
     </li>
    </ul>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#window-with-maxsize">
     4. Window with MAXSIZE
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#id4">
       Example
      </a>
     </li>
    </ul>
   </li>
  </ul>
 </li>
</ul>

    </nav>
</div>
    </div>
    <div class="article row">
        <div class="col pl-md-3 pl-lg-5 content-container">
            <!-- Table of contents that is only displayed when printing the page -->
            <div id="jb-print-docs-body" class="onlyprint">
                <h1>WINDOW Clause</h1>
                <!-- Table of contents -->
                <div id="print-main-content">
                    <div id="jb-print-toc">
                        
                        <div>
                            <h2> Contents </h2>
                        </div>
                        <nav aria-label="Page">
                            <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#syntax">
   Syntax
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#sql-statement-template">
   SQL Statement Template
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#description">
   Description
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#basic-window-spec-syntax-elements">
   Basic WINDOW SPEC Syntax Elements
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#window-partition-clause-and-window-orderby-clause">
     Window Partition Clause And Window OrderBy Clause
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#window-frame-units">
     Window Frame Units
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#window-frame-extent">
     Window Frame Extent
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#example">
       Example
      </a>
     </li>
    </ul>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#windowspec-elements-specifically-designed-by-openmldb">
   WindowSpec Elements Specifically Designed by OpenMLDB
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#window-union">
     1. WINDOW … UNION
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#id1">
       Example
      </a>
     </li>
    </ul>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#window-with-exclude-current-time">
     2. Window with EXCLUDE CURRENT_TIME
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#id2">
       Example
      </a>
     </li>
    </ul>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#window-with-exclude-current-row">
     3. Window with EXCLUDE CURRENT_ROW
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#id3">
       Example
      </a>
     </li>
    </ul>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#window-with-maxsize">
     4. Window with MAXSIZE
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#id4">
       Example
      </a>
     </li>
    </ul>
   </li>
  </ul>
 </li>
</ul>

                        </nav>
                    </div>
                </div>
            </div>
            <main id="main-content" role="main">
                
              <div>
                
  <section class="tex2jax_ignore mathjax_ignore" id="window-clause">
<h1>WINDOW Clause<a class="headerlink" href="#window-clause" title="Permalink to this headline">#</a></h1>
<section id="syntax">
<h2>Syntax<a class="headerlink" href="#syntax" title="Permalink to this headline">#</a></h2>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="n">WindowClauseOptional</span><span class="w"></span>
<span class="w">        </span><span class="p">::</span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="w"> </span><span class="s1">&#39;WINDOW&#39;</span><span class="w"> </span><span class="n">WindowDefinition</span><span class="w"> </span><span class="p">(</span><span class="w"> </span><span class="s1">&#39;,&#39;</span><span class="w"> </span><span class="n">WindowDefinition</span><span class="w"> </span><span class="p">)</span><span class="o">*</span><span class="w"> </span><span class="p">)</span><span class="o">?</span><span class="w"></span>

<span class="n">WindowDefinition</span><span class="w"></span>
<span class="w">        </span><span class="p">::</span><span class="o">=</span><span class="w"> </span><span class="n">WindowName</span><span class="w"> </span><span class="s1">&#39;AS&#39;</span><span class="w"> </span><span class="n">WindowSpec</span><span class="w"></span>

<span class="n">WindowSpec</span><span class="w"></span>
<span class="w">        </span><span class="p">::</span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;(&#39;</span><span class="w"> </span><span class="n">WindowSpecDetails</span><span class="w"> </span><span class="s1">&#39;)&#39;</span><span class="w"></span>

<span class="n">WindowSpecDetails</span><span class="w"></span>
<span class="w">        </span><span class="p">::</span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="n">ExistingWindowName</span><span class="p">]</span><span class="w"> </span><span class="p">[</span><span class="n">WindowUnionClause</span><span class="p">]</span><span class="w"> </span><span class="n">WindowPartitionClause</span><span class="w"> </span><span class="n">WindowOrderByClause</span><span class="w"> </span><span class="n">WindowFrameClause</span><span class="w"> </span><span class="p">(</span><span class="n">WindowAttribute</span><span class="p">)</span><span class="o">*</span><span class="w"></span>

<span class="n">WindowUnionClause</span><span class="w"></span>
<span class="w">        </span><span class="p">::</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="w"> </span><span class="s1">&#39;UNION&#39;</span><span class="w"> </span><span class="n">TableRefs</span><span class="p">)</span><span class="w"></span>

<span class="n">WindowPartitionClause</span><span class="w"></span>
<span class="w">        </span><span class="p">::</span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="w"> </span><span class="s1">&#39;PARTITION&#39;</span><span class="w"> </span><span class="s1">&#39;BY&#39;</span><span class="w"> </span><span class="n">ByList</span><span class="w"> </span><span class="p">)</span><span class="w"></span>

<span class="n">WindowOrderByClause</span><span class="w"></span>
<span class="w">        </span><span class="p">::</span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="w"> </span><span class="s1">&#39;ORDER&#39;</span><span class="w"> </span><span class="s1">&#39;BY&#39;</span><span class="w"> </span><span class="n">ByList</span><span class="w"> </span><span class="p">)</span><span class="w"></span>

<span class="n">WindowFrameClause</span><span class="w"></span>
<span class="w">        </span><span class="p">::</span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="w"> </span><span class="n">WindowFrameUnits</span><span class="w"> </span><span class="n">WindowFrameExtent</span><span class="w"> </span><span class="p">[</span><span class="n">WindowFrameMaxSize</span><span class="p">])</span><span class="w"></span>

<span class="n">WindowFrameUnits</span><span class="w"></span>
<span class="w">        </span><span class="p">::</span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;ROWS&#39;</span><span class="w"></span>
<span class="w">          </span><span class="o">|</span><span class="w"> </span><span class="s1">&#39;ROWS_RANGE&#39;</span><span class="w"></span>

<span class="n">WindowFrameExtent</span><span class="w"></span>
<span class="w">        </span><span class="p">::</span><span class="o">=</span><span class="w"> </span><span class="n">WindowFrameStart</span><span class="w"></span>
<span class="w">          </span><span class="o">|</span><span class="w"> </span><span class="n">WindowFrameBetween</span><span class="w"></span>

<span class="n">WindowFrameStart</span><span class="w"></span>
<span class="w">        </span><span class="p">::</span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="w"> </span><span class="s1">&#39;UNBOUNDED&#39;</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">NumLiteral</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">IntervalLiteral</span><span class="w"> </span><span class="p">)</span><span class="w"> </span><span class="p">[</span><span class="s1">&#39;OPEN&#39;</span><span class="p">]</span><span class="w"> </span><span class="s1">&#39;PRECEDING&#39;</span><span class="w"></span>
<span class="w">          </span><span class="o">|</span><span class="w"> </span><span class="s1">&#39;CURRENT&#39;</span><span class="w"> </span><span class="s1">&#39;ROW&#39;</span><span class="w"></span>

<span class="n">WindowFrameBetween</span><span class="w"></span>
<span class="w">        </span><span class="p">::</span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;BETWEEN&#39;</span><span class="w"> </span><span class="n">WindowFrameBound</span><span class="w"> </span><span class="s1">&#39;AND&#39;</span><span class="w"> </span><span class="n">WindowFrameBound</span><span class="w"></span>

<span class="n">WindowFrameBound</span><span class="w"></span>
<span class="w">        </span><span class="p">::</span><span class="o">=</span><span class="w"> </span><span class="n">WindowFrameStart</span><span class="w"></span>
<span class="w">          </span><span class="o">|</span><span class="w"> </span><span class="p">(</span><span class="w"> </span><span class="s1">&#39;UNBOUNDED&#39;</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">NumLiteral</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">IntervalLiteral</span><span class="w"> </span><span class="p">)</span><span class="w"> </span><span class="p">[</span><span class="s1">&#39;OPEN&#39;</span><span class="p">]</span><span class="w"> </span><span class="s1">&#39;FOLLOWING&#39;</span><span class="w"></span>

<span class="n">WindowAttribute</span><span class="w"></span>
<span class="w">        </span><span class="p">::</span><span class="o">=</span><span class="w"> </span><span class="n">WindowExcludeCurrentTime</span><span class="w"></span>
<span class="w">          </span><span class="o">|</span><span class="w"> </span><span class="n">WindowExcludeCurrentRow</span><span class="w"></span>
<span class="w">          </span><span class="o">|</span><span class="w"> </span><span class="n">WindowInstanceNotInWindow</span><span class="w"></span>

<span class="n">WindowExcludeCurrentTime</span><span class="w"></span>
<span class="w">        </span><span class="p">::</span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;EXCLUDE&#39;</span><span class="w"> </span><span class="s1">&#39;CURRENT_TIME&#39;</span><span class="w"></span>

<span class="n">WindowExcludeCurrentRow</span><span class="w"></span>
<span class="w">        </span><span class="p">::</span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;EXCLUDE&#39;</span><span class="w"> </span><span class="s1">&#39;CURRENT_ROW&#39;</span><span class="w"></span>

<span class="n">WindowInstanceNotInWindow</span><span class="w"></span>
<span class="w">        </span><span class="p">::</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;INSTANCE_NOT_IN_WINDOW&#39;</span><span class="w"></span>
</pre></div>
</div>
<p><em>Window function</em> is similar to aggregate functions. The difference is that the window function does not need to pack the query results into a single line when output the results. Instead, each line is separated when using WINDOW clause.
However, the window function can scan all rows that may be part of the current row’s group, depending on the grouping specification of the window function (the <code class="docutils literal notranslate"><span class="pre">PARTITION</span> <span class="pre">BY</span></code> on columns).
The syntax for calling a function over a window is shown bellow:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">function_name</span> <span class="p">([</span><span class="n">expression</span> <span class="p">[,</span> <span class="n">expression</span> <span class="o">...</span> <span class="p">]])</span> <span class="n">OVER</span> <span class="p">(</span> <span class="n">window_definition</span> <span class="p">)</span>
<span class="n">function_name</span> <span class="p">([</span><span class="n">expression</span> <span class="p">[,</span> <span class="n">expression</span> <span class="o">...</span> <span class="p">]])</span> <span class="n">OVER</span> <span class="n">window_name</span>
<span class="n">function_name</span> <span class="p">(</span> <span class="o">*</span> <span class="p">)</span> <span class="n">OVER</span> <span class="p">(</span> <span class="n">window_definition</span> <span class="p">)</span>
<span class="n">function_name</span> <span class="p">(</span> <span class="o">*</span> <span class="p">)</span> <span class="n">OVER</span> <span class="n">window_name</span>
</pre></div>
</div>
</section>
<section id="sql-statement-template">
<h2>SQL Statement Template<a class="headerlink" href="#sql-statement-template" title="Permalink to this headline">#</a></h2>
<ul class="simple">
<li><p>ROWS WINDOW SQL template</p></li>
</ul>
<div class="highlight-sqlite notranslate"><div class="highlight"><pre><span></span>SELECT select_expr [, select_expr ...], window_function_name(expr) OVER window_name, ... FROM ... WINDOW AS window_name (PARTITION BY ... ORDER BY ... ROWS BETWEEN ... AND ...)

</pre></div>
</div>
<ul class="simple">
<li><p>ROWS RANGE WINDOW SQL Template</p></li>
</ul>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="k">SELECT</span><span class="w"> </span><span class="n">select_expr</span><span class="w"> </span><span class="p">[,</span><span class="n">select_expr</span><span class="p">...],</span><span class="w"> </span><span class="n">window_function_name</span><span class="p">(</span><span class="n">expr</span><span class="p">)</span><span class="w"> </span><span class="n">OVER</span><span class="w"> </span><span class="n">window_name</span><span class="p">,</span><span class="w"> </span><span class="p">...</span><span class="w"> </span><span class="k">FROM</span><span class="w"> </span><span class="p">...</span><span class="w"> </span><span class="n">WINDOW</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">window_name</span><span class="w"> </span><span class="p">(</span><span class="n">PARTITION</span><span class="w"> </span><span class="k">BY</span><span class="w"> </span><span class="p">...</span><span class="w"> </span><span class="k">ORDER</span><span class="w"> </span><span class="k">BY</span><span class="w"> </span><span class="p">...</span><span class="w"> </span><span class="n">ROWS_RANEG</span><span class="w"> </span><span class="k">BETWEEN</span><span class="w"> </span><span class="p">...</span><span class="w"> </span><span class="k">AND</span><span class="w"> </span><span class="p">...)</span><span class="w"></span>
</pre></div>
</div>
</section>
<section id="description">
<h2>Description<a class="headerlink" href="#description" title="Permalink to this headline">#</a></h2>
<table class="colwidths-auto table">
<thead>
<tr class="row-odd"><th class="text-left head"><p><code class="docutils literal notranslate"><span class="pre">SELECT</span></code> Statement Elements</p></th>
<th class="head"><p>Offline Mode</p></th>
<th class="head"><p>Online Preview Mode</p></th>
<th class="head"><p>Online Request Mode</p></th>
<th class="text-left head"><p>Note</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td class="text-left"><p>WINDOW Clause</p></td>
<td><p><strong><code class="docutils literal notranslate"><span class="pre">✓</span></code></strong></p></td>
<td><p></p></td>
<td><p><strong><code class="docutils literal notranslate"><span class="pre">✓</span></code></strong></p></td>
<td class="text-left"><p>The window clause is used to define one or several windows. Windows can be named or anonymous. Users can call aggregate functions on the window to perform analysis (<code class="docutils literal notranslate"><span class="pre">sql</span> <span class="pre">agg_func()</span> <span class="pre">over</span> <span class="pre">window_name</span></code>). For Online Request Mode, please follow the <a class="reference internal" href="../deployment_manage/ONLINE_SERVING_REQUIREMENTS.html#window-usage-specification-under-online-serving"><span class="std std-doc">specification of WINDOW Clause under Online Request</span></a></p></td>
</tr>
</tbody>
</table>
</section>
<section id="basic-window-spec-syntax-elements">
<h2>Basic WINDOW SPEC Syntax Elements<a class="headerlink" href="#basic-window-spec-syntax-elements" title="Permalink to this headline">#</a></h2>
<section id="window-partition-clause-and-window-orderby-clause">
<h3>Window Partition Clause And Window OrderBy Clause<a class="headerlink" href="#window-partition-clause-and-window-orderby-clause" title="Permalink to this headline">#</a></h3>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="n">WindowPartitionClause</span><span class="w"></span>
<span class="w">        </span><span class="p">::</span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="w"> </span><span class="s1">&#39;PARTITION&#39;</span><span class="w"> </span><span class="s1">&#39;BY&#39;</span><span class="w"> </span><span class="n">ByList</span><span class="w"> </span><span class="p">)</span><span class="w"></span>

<span class="n">WindowOrderByClause</span><span class="w"></span>
<span class="w">        </span><span class="p">::</span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="w"> </span><span class="s1">&#39;ORDER&#39;</span><span class="w"> </span><span class="s1">&#39;BY&#39;</span><span class="w"> </span><span class="n">ByList</span><span class="w"> </span><span class="p">)</span><span class="w"></span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">PARTITION</span> <span class="pre">BY</span></code> option groups the rows of the query into <em>partitions</em>, which are processed separately in the window function. <code class="docutils literal notranslate"><span class="pre">PARTITION</span> <span class="pre">BY</span></code> and the query level <code class="docutils literal notranslate"><span class="pre">GROUP</span> <span class="pre">BY</span></code> clause do similar work, except that its expressions can only be used as expressions and not as output column names or numbers. OpenMLDB requires that <code class="docutils literal notranslate"><span class="pre">PARTITION</span> <span class="pre">BY</span></code> must be configured. And currently <strong>only supports grouping by column</strong>, cannot support grouping by operation and function expression.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">ORDER</span> <span class="pre">BY</span></code> option determines the order in which the rows in the partition are processed by the window function. It does a similar job as a query-level <code class="docutils literal notranslate"><span class="pre">ORDER</span> <span class="pre">BY</span></code> clause, but again it cannot be used as an output column name or number. Likewise, OpenMLDB requires that <code class="docutils literal notranslate"><span class="pre">ORDER</span> <span class="pre">BY</span></code> must be configured. And currently <strong>only supports sorting by column</strong>, and cannot support sorting by operation and function expression.</p>
</section>
<section id="window-frame-units">
<h3>Window Frame Units<a class="headerlink" href="#window-frame-units" title="Permalink to this headline">#</a></h3>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="n">WindowFrameUnits</span><span class="w"></span>
<span class="w">        </span><span class="p">::</span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;ROWS&#39;</span><span class="w"></span>
<span class="w">          </span><span class="o">|</span><span class="w"> </span><span class="s1">&#39;ROWS_RANGE&#39;</span><span class="w"></span>
</pre></div>
</div>
<p>WindowFrameUnits defines the frame type of the window. OpenMLDB supports two types of window frames: ROWS and ROWS_RANGE</p>
<p>The SQL standard RANGE class window OpenMLDB system does not currently support it. Their direct comparison differences are shown in the figure below</p>
<p><img alt="Figure 1: window frame type" src="../../../_images/window_frame_type.png" /></p>
<ul class="simple">
<li><p>ROWS: The window is drawn into the window by rows, and the window is slid out according to the number of rows</p></li>
<li><p>ROWS_RANGE: The window is drawn into the window by rows, and slides out of the window according to the time interval</p></li>
<li><p>RANGE: The window is divided into the window according to the time granularity (may slide in multiple data rows at the same time at a time), and slide out of the window according to the time interval</p></li>
</ul>
</section>
<section id="window-frame-extent">
<h3>Window Frame Extent<a class="headerlink" href="#window-frame-extent" title="Permalink to this headline">#</a></h3>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="n">WindowFrameExtent</span><span class="w"></span>
<span class="w">        </span><span class="p">::</span><span class="o">=</span><span class="w"> </span><span class="n">WindowFrameStart</span><span class="w"></span>
<span class="w">          </span><span class="o">|</span><span class="w"> </span><span class="n">WindowFrameBetween</span><span class="w"></span>
<span class="n">WindowFrameBetween</span><span class="w"></span>
<span class="w">        </span><span class="p">::</span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;BETWEEN&#39;</span><span class="w"> </span><span class="n">WindowFrameBound</span><span class="w"> </span><span class="s1">&#39;AND&#39;</span><span class="w"> </span><span class="n">WindowFrameBound</span><span class="w"></span>
<span class="n">WindowFrameBound</span><span class="w"></span>
<span class="w">        </span><span class="p">::</span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="w"> </span><span class="s1">&#39;UNBOUNDED&#39;</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">NumLiteral</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">IntervalLiteral</span><span class="w"> </span><span class="p">)</span><span class="w"> </span><span class="p">[</span><span class="s1">&#39;OPEN&#39;</span><span class="p">]</span><span class="w"> </span><span class="s1">&#39;PRECEDING&#39;</span><span class="w"></span>
<span class="w">          </span><span class="o">|</span><span class="w"> </span><span class="s1">&#39;CURRENT&#39;</span><span class="w"> </span><span class="s1">&#39;ROW&#39;</span><span class="w"></span>
</pre></div>
</div>
<p><strong>WindowFrameExtent</strong> defines the upper and lower bounds of a window. The window type can be defined by <code class="docutils literal notranslate"><span class="pre">ROWS</span></code> or <code class="docutils literal notranslate"><span class="pre">ROWS_RANGE</span></code>.</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">CURRENT</span> <span class="pre">ROW</span></code> is the row currently being computed.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">UNBOUNDED</span> <span class="pre">PRECEDING</span></code> indicates the upper bound of this window is unlimited.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">expr</span> <span class="pre">PRECEDING</span></code></p>
<ul>
<li><p>When the window is <code class="docutils literal notranslate"><span class="pre">ROWS</span></code> type, <code class="docutils literal notranslate"><span class="pre">expr</span></code> must be a positive integer, which indicates the upper boundary is the <code class="docutils literal notranslate"><span class="pre">expr</span></code>th row before current row.</p></li>
<li><p>When the window type is <code class="docutils literal notranslate"><span class="pre">ROWS_RANGE</span></code>,<code class="docutils literal notranslate"><span class="pre">expr</span></code> should be a time interval, like <code class="docutils literal notranslate"><span class="pre">10s</span></code>, <code class="docutils literal notranslate"><span class="pre">10m</span></code>,<code class="docutils literal notranslate"><span class="pre">10h</span></code>, <code class="docutils literal notranslate"><span class="pre">10d</span></code>. The upper bound is the <code class="docutils literal notranslate"><span class="pre">expr</span></code> ahead of the time of current row.</p></li>
</ul>
</li>
<li><p>By default, OpenMLDB uses closed interval. To change this, you can use keyword <code class="docutils literal notranslate"><span class="pre">OPEN</span></code>.</p></li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Standard SQL also supports <code class="docutils literal notranslate"><span class="pre">FOLLOWING</span></code> keyword, but OpenMLDB doesn’t support it currently.</p>
</div>
<section id="example">
<h4>Example<a class="headerlink" href="#example" title="Permalink to this headline">#</a></h4>
<ul class="simple">
<li><p><strong>Named Window</strong></p></li>
</ul>
<div class="highlight-SQL notranslate"><div class="highlight"><pre><span></span><span class="k">SELECT</span><span class="w"> </span><span class="k">sum</span><span class="p">(</span><span class="n">col2</span><span class="p">)</span><span class="w"> </span><span class="n">OVER</span><span class="w"> </span><span class="n">w1</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">w1_col2_sum</span><span class="w"> </span><span class="k">FROM</span><span class="w"> </span><span class="n">t1</span><span class="w"></span>
<span class="n">WINDOW</span><span class="w"> </span><span class="n">w1</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="p">(</span><span class="n">PARTITION</span><span class="w"> </span><span class="k">BY</span><span class="w"> </span><span class="n">col1</span><span class="w"> </span><span class="k">ORDER</span><span class="w"> </span><span class="k">BY</span><span class="w"> </span><span class="n">col5</span><span class="w"> </span><span class="k">ROWS</span><span class="w"> </span><span class="k">BETWEEN</span><span class="w"> </span><span class="mi">3</span><span class="w"> </span><span class="n">PRECEDING</span><span class="w"> </span><span class="k">AND</span><span class="w"> </span><span class="k">CURRENT</span><span class="w"> </span><span class="k">ROW</span><span class="p">)</span><span class="w"></span>
</pre></div>
</div>
<ul class="simple">
<li><p><strong>Anonymous Window</strong></p></li>
</ul>
<div class="highlight-SQL notranslate"><div class="highlight"><pre><span></span><span class="k">SELECT</span><span class="w"> </span><span class="n">id</span><span class="p">,</span><span class="w"> </span><span class="n">pk1</span><span class="p">,</span><span class="w"> </span><span class="n">col1</span><span class="p">,</span><span class="w"> </span><span class="n">std_ts</span><span class="p">,</span><span class="w"></span>
<span class="k">sum</span><span class="p">(</span><span class="n">col1</span><span class="p">)</span><span class="w"> </span><span class="n">OVER</span><span class="w"> </span><span class="p">(</span><span class="n">PARTITION</span><span class="w"> </span><span class="k">BY</span><span class="w"> </span><span class="n">pk1</span><span class="w"> </span><span class="k">ORDER</span><span class="w"> </span><span class="k">BY</span><span class="w"> </span><span class="n">std_ts</span><span class="w"> </span><span class="k">ROWS</span><span class="w"> </span><span class="k">BETWEEN</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="n">PRECEDING</span><span class="w"> </span><span class="k">AND</span><span class="w"> </span><span class="k">CURRENT</span><span class="w"> </span><span class="k">ROW</span><span class="p">)</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">w1_col1_sum</span><span class="w"></span>
<span class="k">from</span><span class="w"> </span><span class="n">t1</span><span class="p">;</span><span class="w"></span>
</pre></div>
</div>
<ul class="simple">
<li><p><strong>ROWS Window</strong></p></li>
</ul>
<p>The following <code class="docutils literal notranslate"><span class="pre">WINDOW</span></code> clause defines a <code class="docutils literal notranslate"><span class="pre">ROWS</span></code> window containing preceding 1000 rows and current row. The window will contain a maximum of 1001 rows.</p>
<div class="highlight-SQL notranslate"><div class="highlight"><pre><span></span><span class="k">SELECT</span><span class="w"> </span><span class="k">sum</span><span class="p">(</span><span class="n">col2</span><span class="p">)</span><span class="w"> </span><span class="n">OVER</span><span class="w"> </span><span class="n">w1</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">w1_col2_sum</span><span class="w"> </span><span class="k">FROM</span><span class="w"> </span><span class="n">t1</span><span class="w"></span>
<span class="n">WINDOW</span><span class="w"> </span><span class="n">w1</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="p">(</span><span class="n">PARTITION</span><span class="w"> </span><span class="k">BY</span><span class="w"> </span><span class="n">col1</span><span class="w"> </span><span class="k">ORDER</span><span class="w"> </span><span class="k">BY</span><span class="w"> </span><span class="n">col5</span><span class="w"> </span><span class="k">ROWS</span><span class="w"> </span><span class="k">BETWEEN</span><span class="w"> </span><span class="mi">1000</span><span class="w"> </span><span class="n">PRECEDING</span><span class="w"> </span><span class="k">AND</span><span class="w"> </span><span class="k">CURRENT</span><span class="w"> </span><span class="k">ROW</span><span class="p">);</span><span class="w"></span>
</pre></div>
</div>
<ul class="simple">
<li><p><strong>ROWS_RANGE Window</strong></p></li>
</ul>
<p>The following <code class="docutils literal notranslate"><span class="pre">WINDOW</span></code> clause defines a <code class="docutils literal notranslate"><span class="pre">ROWS_RANGE</span></code> window containing preceding 10s rows and current row.</p>
<div class="highlight-SQL notranslate"><div class="highlight"><pre><span></span><span class="k">SELECT</span><span class="w"> </span><span class="k">sum</span><span class="p">(</span><span class="n">col2</span><span class="p">)</span><span class="w"> </span><span class="n">OVER</span><span class="w"> </span><span class="n">w1</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">w1_col2_sum</span><span class="w"> </span><span class="k">FROM</span><span class="w"> </span><span class="n">t1</span><span class="w"></span>
<span class="n">WINDOW</span><span class="w"> </span><span class="n">w1</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="p">(</span><span class="n">PARTITION</span><span class="w"> </span><span class="k">BY</span><span class="w"> </span><span class="n">col1</span><span class="w"> </span><span class="k">ORDER</span><span class="w"> </span><span class="k">BY</span><span class="w"> </span><span class="n">col5</span><span class="w"> </span><span class="n">ROWS_RANGE</span><span class="w"> </span><span class="k">BETWEEN</span><span class="w"> </span><span class="mi">10</span><span class="n">s</span><span class="w"> </span><span class="n">PRECEDING</span><span class="w"> </span><span class="k">AND</span><span class="w"> </span><span class="k">CURRENT</span><span class="w"> </span><span class="k">ROW</span><span class="p">);</span><span class="w"></span>
</pre></div>
</div>
</section>
</section>
</section>
<section id="windowspec-elements-specifically-designed-by-openmldb">
<h2>WindowSpec Elements Specifically Designed by OpenMLDB<a class="headerlink" href="#windowspec-elements-specifically-designed-by-openmldb" title="Permalink to this headline">#</a></h2>
<section id="window-union">
<h3>1. WINDOW … UNION<a class="headerlink" href="#window-union" title="Permalink to this headline">#</a></h3>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="n">WindowUnionClause</span><span class="w"></span>
<span class="w">        </span><span class="p">::</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="w"> </span><span class="s1">&#39;UNION&#39;</span><span class="w"> </span><span class="n">TableRefs</span><span class="p">)</span><span class="w"></span>
</pre></div>
</div>
<section id="id1">
<h4>Example<a class="headerlink" href="#id1" title="Permalink to this headline">#</a></h4>
<ul class="simple">
<li><p><strong>Window with <code class="docutils literal notranslate"><span class="pre">UNION</span></code> On 2 Tables</strong></p></li>
</ul>
<div class="highlight-SQL notranslate"><div class="highlight"><pre><span></span><span class="k">SELECT</span><span class="w"> </span><span class="n">col1</span><span class="p">,</span><span class="w"> </span><span class="n">col5</span><span class="p">,</span><span class="w"> </span><span class="k">sum</span><span class="p">(</span><span class="n">col2</span><span class="p">)</span><span class="w"> </span><span class="n">OVER</span><span class="w"> </span><span class="n">w1</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">w1_col2_sum</span><span class="w"> </span><span class="k">FROM</span><span class="w"> </span><span class="n">t1</span><span class="w"></span>
<span class="n">WINDOW</span><span class="w"> </span><span class="n">w1</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="p">(</span><span class="k">UNION</span><span class="w"> </span><span class="n">t2</span><span class="w"> </span><span class="n">PARTITION</span><span class="w"> </span><span class="k">BY</span><span class="w"> </span><span class="n">col1</span><span class="w"> </span><span class="k">ORDER</span><span class="w"> </span><span class="k">BY</span><span class="w"> </span><span class="n">col5</span><span class="w"> </span><span class="n">ROWS_RANGE</span><span class="w"> </span><span class="k">BETWEEN</span><span class="w"> </span><span class="mi">10</span><span class="n">s</span><span class="w"> </span><span class="n">PRECEDING</span><span class="w"> </span><span class="k">AND</span><span class="w"> </span><span class="k">CURRENT</span><span class="w"> </span><span class="k">ROW</span><span class="p">);</span><span class="w"></span>
</pre></div>
</div>
<p><img alt="Figure 2: window union one table" src="../../../_images/window_union_1_table.png" /></p>
<ul class="simple">
<li><p><strong>Window with <code class="docutils literal notranslate"><span class="pre">UNION</span></code> on Multiple Tables</strong></p></li>
</ul>
<div class="highlight-SQL notranslate"><div class="highlight"><pre><span></span><span class="k">SELECT</span><span class="w"> </span><span class="n">col1</span><span class="p">,</span><span class="w"> </span><span class="n">col5</span><span class="p">,</span><span class="w"> </span><span class="k">sum</span><span class="p">(</span><span class="n">col2</span><span class="p">)</span><span class="w"> </span><span class="n">OVER</span><span class="w"> </span><span class="n">w1</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">w1_col2_sum</span><span class="w"> </span><span class="k">FROM</span><span class="w"> </span><span class="n">t1</span><span class="w"></span>
<span class="n">WINDOW</span><span class="w"> </span><span class="n">w1</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="p">(</span><span class="k">UNION</span><span class="w"> </span><span class="n">t2</span><span class="p">,</span><span class="w"> </span><span class="n">t3</span><span class="w"> </span><span class="n">PARTITION</span><span class="w"> </span><span class="k">BY</span><span class="w"> </span><span class="n">col1</span><span class="w"> </span><span class="k">ORDER</span><span class="w"> </span><span class="k">BY</span><span class="w"> </span><span class="n">col5</span><span class="w"> </span><span class="n">ROWS_RANGE</span><span class="w"> </span><span class="k">BETWEEN</span><span class="w"> </span><span class="mi">10</span><span class="n">s</span><span class="w"> </span><span class="n">PRECEDING</span><span class="w"> </span><span class="k">AND</span><span class="w"> </span><span class="k">CURRENT</span><span class="w"> </span><span class="k">ROW</span><span class="p">);</span><span class="w"></span>
</pre></div>
</div>
<p><img alt="Figure 3: window union two tables" src="../../../_images/window_union_2_table.png" /></p>
<ul class="simple">
<li><p><strong>Window with <code class="docutils literal notranslate"><span class="pre">UNION</span></code> and <code class="docutils literal notranslate"><span class="pre">INSTANCE_NOT_IN_WINDOW</span></code></strong></p></li>
</ul>
<div class="highlight-SQL notranslate"><div class="highlight"><pre><span></span><span class="k">SELECT</span><span class="w"> </span><span class="n">col1</span><span class="p">,</span><span class="w"> </span><span class="n">col5</span><span class="p">,</span><span class="w"> </span><span class="k">sum</span><span class="p">(</span><span class="n">col2</span><span class="p">)</span><span class="w"> </span><span class="n">OVER</span><span class="w"> </span><span class="n">w1</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">w1_col2_sum</span><span class="w"> </span><span class="k">FROM</span><span class="w"> </span><span class="n">t1</span><span class="w"></span>
<span class="n">WINDOW</span><span class="w"> </span><span class="n">w1</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="p">(</span><span class="k">UNION</span><span class="w"> </span><span class="n">t2</span><span class="w"> </span><span class="n">PARTITION</span><span class="w"> </span><span class="k">BY</span><span class="w"> </span><span class="n">col1</span><span class="w"> </span><span class="k">ORDER</span><span class="w"> </span><span class="k">BY</span><span class="w"> </span><span class="n">col5</span><span class="w"> </span><span class="n">ROWS_RANGE</span><span class="w"> </span><span class="k">BETWEEN</span><span class="w"> </span><span class="mi">10</span><span class="n">s</span><span class="w"> </span><span class="n">PRECEDING</span><span class="w"> </span><span class="k">AND</span><span class="w"> </span><span class="k">CURRENT</span><span class="w"> </span><span class="k">ROW</span><span class="w"> </span><span class="n">INSTANCE_NOT_IN_WINDOW</span><span class="p">);</span><span class="w"></span>
</pre></div>
</div>
<p><img alt="Figure 4: window union one table with instance_not_in_window" src="../../../_images/window_union_1_table_instance_not_in_window.png" /></p>
<ul class="simple">
<li><p><strong>Window with <code class="docutils literal notranslate"><span class="pre">UNION</span></code> Containing Subquery</strong></p></li>
</ul>
<div class="highlight-SQL notranslate"><div class="highlight"><pre><span></span><span class="k">SELECT</span><span class="w"> </span><span class="n">col1</span><span class="p">,</span><span class="w"> </span><span class="n">col5</span><span class="p">,</span><span class="w"> </span><span class="k">sum</span><span class="p">(</span><span class="n">col2</span><span class="p">)</span><span class="w"> </span><span class="n">OVER</span><span class="w"> </span><span class="n">w1</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">w1_col2_sum</span><span class="w"> </span><span class="k">FROM</span><span class="w"> </span><span class="n">t1</span><span class="w"></span>
<span class="n">WINDOW</span><span class="w"> </span><span class="n">w1</span><span class="w"> </span><span class="k">AS</span><span class="w"></span>
<span class="p">(</span><span class="k">UNION</span><span class="w"> </span><span class="p">(</span><span class="k">select</span><span class="w"> </span><span class="n">c1</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">col1</span><span class="p">,</span><span class="w"> </span><span class="n">c2</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">col2</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">.</span><span class="mi">0</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">col3</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">.</span><span class="mi">0</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">col4</span><span class="p">,</span><span class="w"> </span><span class="n">c5</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">col5</span><span class="p">,</span><span class="w"> </span><span class="ss">&quot;NA&quot;</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">col6</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">t2</span><span class="p">),</span><span class="w"></span>
<span class="p">(</span><span class="k">select</span><span class="w"> </span><span class="n">c1</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">col1</span><span class="p">,</span><span class="w"> </span><span class="n">c2</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">col2</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">.</span><span class="mi">0</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">col3</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">.</span><span class="mi">0</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">col4</span><span class="p">,</span><span class="w"> </span><span class="n">c5</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">col5</span><span class="p">,</span><span class="w"> </span><span class="ss">&quot;NA&quot;</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">col6</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">t3</span><span class="p">)</span><span class="w"></span>
<span class="n">PARTITION</span><span class="w"> </span><span class="k">BY</span><span class="w"> </span><span class="n">col1</span><span class="w"> </span><span class="k">ORDER</span><span class="w"> </span><span class="k">BY</span><span class="w"> </span><span class="n">col5</span><span class="w"> </span><span class="n">ROWS_RANGE</span><span class="w"> </span><span class="k">BETWEEN</span><span class="w"> </span><span class="mi">10</span><span class="n">s</span><span class="w"> </span><span class="n">PRECEDING</span><span class="w"> </span><span class="k">AND</span><span class="w"> </span><span class="k">CURRENT</span><span class="w"> </span><span class="k">ROW</span><span class="p">);</span><span class="w"></span>
</pre></div>
</div>
</section>
</section>
<section id="window-with-exclude-current-time">
<h3>2. Window with EXCLUDE CURRENT_TIME<a class="headerlink" href="#window-with-exclude-current-time" title="Permalink to this headline">#</a></h3>
<p>Only rows whose <code class="docutils literal notranslate"><span class="pre">timestamp</span></code> values are different to <code class="docutils literal notranslate"><span class="pre">CURRENT</span> <span class="pre">ROW</span></code> will be included in the window.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">WindowExcludeCurrentTime</span> 
        <span class="p">:</span><span class="o">:=</span> <span class="s1">&#39;EXCLUDE&#39;</span> <span class="s1">&#39;CURRENT_TIME&#39;</span>  
</pre></div>
</div>
<section id="id2">
<h4>Example<a class="headerlink" href="#id2" title="Permalink to this headline">#</a></h4>
<ul class="simple">
<li><p><strong>ROWS Window with EXCLUDE CURRENT_TIME</strong></p></li>
</ul>
<p>The following <code class="docutils literal notranslate"><span class="pre">WINDOW</span></code> clause defines a <code class="docutils literal notranslate"><span class="pre">ROWS</span></code> window containing preceding 1000 rows and current row. Any other rows in the window will not have the same time as the <code class="docutils literal notranslate"><span class="pre">CURRENT</span> <span class="pre">ROW</span></code>.</p>
<div class="highlight-SQL notranslate"><div class="highlight"><pre><span></span><span class="k">SELECT</span><span class="w"> </span><span class="k">sum</span><span class="p">(</span><span class="n">col2</span><span class="p">)</span><span class="w"> </span><span class="n">OVER</span><span class="w"> </span><span class="n">w1</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">w1_col2_sum</span><span class="w"> </span><span class="k">FROM</span><span class="w"> </span><span class="n">t1</span><span class="w"></span>
<span class="n">WINDOW</span><span class="w"> </span><span class="n">w1</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="p">(</span><span class="n">PARTITION</span><span class="w"> </span><span class="k">BY</span><span class="w"> </span><span class="n">col1</span><span class="w"> </span><span class="k">ORDER</span><span class="w"> </span><span class="k">BY</span><span class="w"> </span><span class="n">col5</span><span class="w"> </span><span class="k">ROWS</span><span class="w"> </span><span class="k">BETWEEN</span><span class="w"> </span><span class="mi">1000</span><span class="w"> </span><span class="n">PRECEDING</span><span class="w"> </span><span class="k">AND</span><span class="w"> </span><span class="k">CURRENT</span><span class="w"> </span><span class="k">ROW</span><span class="w"> </span><span class="n">EXCLUDE</span><span class="w"> </span><span class="k">CURRENT_TIME</span><span class="p">);</span><span class="w"></span>
</pre></div>
</div>
<ul class="simple">
<li><p><strong>ROWS_RANGE Window with EXCLUDE CURRENT_TIME</strong></p></li>
</ul>
<p>The following <code class="docutils literal notranslate"><span class="pre">WINDOW</span></code> clause defines a <code class="docutils literal notranslate"><span class="pre">ROWS_RANGE</span></code> window containing preceding 10s rows and current row. Any other rows in the window will not have the same time as the <code class="docutils literal notranslate"><span class="pre">CURRENT</span> <span class="pre">ROW</span></code>.</p>
<div class="highlight-SQL notranslate"><div class="highlight"><pre><span></span><span class="k">SELECT</span><span class="w"> </span><span class="k">sum</span><span class="p">(</span><span class="n">col2</span><span class="p">)</span><span class="w"> </span><span class="n">OVER</span><span class="w"> </span><span class="n">w1</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">w1_col2_sum</span><span class="w"> </span><span class="k">FROM</span><span class="w"> </span><span class="n">t1</span><span class="w"></span>
<span class="n">WINDOW</span><span class="w"> </span><span class="n">w1</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="p">(</span><span class="n">PARTITION</span><span class="w"> </span><span class="k">BY</span><span class="w"> </span><span class="n">col1</span><span class="w"> </span><span class="k">ORDER</span><span class="w"> </span><span class="k">BY</span><span class="w"> </span><span class="n">col5</span><span class="w"> </span><span class="n">ROWS_RANGE</span><span class="w"> </span><span class="k">BETWEEN</span><span class="w"> </span><span class="mi">10</span><span class="n">s</span><span class="w"> </span><span class="n">PRECEDING</span><span class="w"> </span><span class="k">AND</span><span class="w"> </span><span class="k">CURRENT</span><span class="w"> </span><span class="k">ROW</span><span class="w"> </span><span class="n">EXCLUDE</span><span class="w"> </span><span class="k">CURRENT_TIME</span><span class="p">);</span><span class="w"></span>
</pre></div>
</div>
<p><img alt="Figure 5: window exclude current time" src="../../../_images/window_exclude_current_time.png" /></p>
</section>
</section>
<section id="window-with-exclude-current-row">
<h3>3. Window with EXCLUDE CURRENT_ROW<a class="headerlink" href="#window-with-exclude-current-row" title="Permalink to this headline">#</a></h3>
<p>Current row do not go into window.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">WindowExcludeCurrentRow</span>
        <span class="p">:</span><span class="o">:=</span> <span class="s1">&#39;EXCLUDE&#39;</span> <span class="s1">&#39;CURRENT_ROW&#39;</span>
</pre></div>
</div>
<section id="id3">
<h4>Example<a class="headerlink" href="#id3" title="Permalink to this headline">#</a></h4>
<ul class="simple">
<li><p><strong>ROWS_RANGE Window with EXCLUDE CURRENT_ROW</strong></p></li>
</ul>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="k">SELECT</span><span class="w"> </span><span class="k">sum</span><span class="p">(</span><span class="n">col2</span><span class="p">)</span><span class="w"> </span><span class="n">OVER</span><span class="w"> </span><span class="n">w1</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">w1_col2_sum</span><span class="w"> </span><span class="k">FROM</span><span class="w"> </span><span class="n">t1</span><span class="w"></span>
<span class="n">WINDOW</span><span class="w"> </span><span class="n">w1</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="p">(</span><span class="n">PARTITION</span><span class="w"> </span><span class="k">BY</span><span class="w"> </span><span class="n">col1</span><span class="w"> </span><span class="k">ORDER</span><span class="w"> </span><span class="k">BY</span><span class="w"> </span><span class="n">col5</span><span class="w"> </span><span class="n">ROWS_RANGE</span><span class="w"> </span><span class="k">BETWEEN</span><span class="w"> </span><span class="mi">10</span><span class="n">s</span><span class="w"> </span><span class="n">PRECEDING</span><span class="w"> </span><span class="k">AND</span><span class="w"> </span><span class="k">CURRENT</span><span class="w"> </span><span class="k">ROW</span><span class="w"> </span><span class="n">EXCLUDE</span><span class="w"> </span><span class="n">CURRENT_ROW</span><span class="p">);</span><span class="w"></span>
</pre></div>
</div>
<p><img alt="Figure 6: window exclude current time" src="../../../_images/window_exclude_current_row.png" /></p>
</section>
</section>
<section id="window-with-maxsize">
<h3>4. Window with MAXSIZE<a class="headerlink" href="#window-with-maxsize" title="Permalink to this headline">#</a></h3>
<p>The keyword <code class="docutils literal notranslate"><span class="pre">MAXSIZE</span></code> is used to limit the number of rows in the window.</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="n">WindowFrameMaxSize</span><span class="w"></span>
<span class="w">        </span><span class="p">::</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">MAXSIZE</span><span class="w"> </span><span class="n">NumLiteral</span><span class="w"></span>
</pre></div>
</div>
<p><img alt="Figure 7: window config max size" src="../../../_images/window_max_size.png" /></p>
<section id="id4">
<h4>Example<a class="headerlink" href="#id4" title="Permalink to this headline">#</a></h4>
<ul class="simple">
<li><p><strong>ROWS_RANGE Window with MAXSIZE</strong></p></li>
</ul>
<p>The following <code class="docutils literal notranslate"><span class="pre">WINDOW</span></code> clause defines a <code class="docutils literal notranslate"><span class="pre">ROWS_RANGE</span></code> window containing preceding 10s rows and current row. There are at most 3 rows in the window.</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="k">SELECT</span><span class="w"> </span><span class="k">sum</span><span class="p">(</span><span class="n">col2</span><span class="p">)</span><span class="w"> </span><span class="n">OVER</span><span class="w"> </span><span class="n">w1</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">w1_col2_sum</span><span class="w"> </span><span class="k">FROM</span><span class="w"> </span><span class="n">t1</span><span class="w"></span>
<span class="n">WINDOW</span><span class="w"> </span><span class="n">w1</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="p">(</span><span class="n">PARTITION</span><span class="w"> </span><span class="k">BY</span><span class="w"> </span><span class="n">col1</span><span class="w"> </span><span class="k">ORDER</span><span class="w"> </span><span class="k">BY</span><span class="w"> </span><span class="n">col5</span><span class="w"> </span><span class="n">ROWS_RANGE</span><span class="w"> </span><span class="k">BETWEEN</span><span class="w"> </span><span class="mi">10</span><span class="n">s</span><span class="w"> </span><span class="n">PRECEDING</span><span class="w"> </span><span class="k">AND</span><span class="w"> </span><span class="k">CURRENT</span><span class="w"> </span><span class="k">ROW</span><span class="w"> </span><span class="n">MAXSIZE</span><span class="w"> </span><span class="mi">3</span><span class="p">);</span><span class="w"></span>
</pre></div>
</div>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p>Please refer to <a class="reference internal" href="../functions_and_operators/Files/udfs_8h.html"><span class="doc std std-doc">Built-in Functions</span></a> for aggregate functions that can be used in window computation.</p>
</div>
</section>
</section>
</section>
</section>


              </div>
              
            </main>
            <footer class="footer-article noprint">
                
    <!-- Previous / next buttons -->
<div class='prev-next-area'>
    <a class='left-prev' id="prev-link" href="HAVING_CLAUSE.html" title="previous page">
        <i class="fas fa-angle-left"></i>
        <div class="prev-next-info">
            <p class="prev-next-subtitle">previous</p>
            <p class="prev-next-title">Having Clause</p>
        </div>
    </a>
    <a class='right-next' id="next-link" href="LIMIT_CLAUSE.html" title="next page">
    <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Limit Clause</p>
    </div>
    <i class="fas fa-angle-right"></i>
    </a>
</div>
            </footer>
        </div>
    </div>
    <div class="footer-content row">
        <footer class="col footer"><p>
  
    By OpenMLDB<br/>
  
      &copy; Copyright 2022, OpenMLDB.<br/>
    Last updated on Aug 27, 2022, 3:54:29 PM.<br/>
</p>
        </footer>
    </div>
    
</div>


      </div>
    </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../../../_static/scripts/pydata-sphinx-theme.js?digest=1999514e3f237ded88cf"></script>


  </body>
</html>